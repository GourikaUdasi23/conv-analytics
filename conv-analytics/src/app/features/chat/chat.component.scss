:host {
  display: block;
  height: 100%;
}

.chat-layout {
  height: 100%;
  display: grid;
  grid-template-columns: 280px 1fr;
  gap: 16px;
  padding: 12px;
  box-sizing: border-box;
}

.left-col {
  background: var(--left-bg);
  border-radius: 8px;
  padding: 8px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  min-height: 0;
}

.left-header {
  position: sticky;
  top: 8px;
  z-index: 2;
}



.convo-list {
  overflow: auto;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.convo-item {
  display: flex;
  align-items: center;
  padding: 8px;
  border-radius: 6px;
  cursor: pointer;
  transition: background .12s ease, transform .06s ease;
}
.convo-item:hover { background: rgba(0,0,0,0.04); transform: translateY(-1px); }
.convo-item.active { background: var(--accent-soft); }
.convo-item { gap: 8px; }
.convo-item .avatar { width:36px; height:36px; border-radius:50%; background: linear-gradient(135deg, rgba(255,255,255,0.85), var(--bubble-bot-start)); display:flex; align-items:center; justify-content:center; font-weight:700; color: var(--bubble-bot-text); flex: 0 0 auto; }
.convo-item .meta { flex: 1 1 auto; min-width: 0; }
.convo-item .title { font-weight: 600; margin-bottom: 4px; font-size: 14px; }
.convo-item .preview { font-size: 12px; opacity: .75; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; line-clamp: 2; }
.convo-item .time { font-size: 11px; opacity: .6; margin-left: 8px; flex: 0 0 auto; }
.convo-item .actions { margin-left: 8px; }
.empty { padding: 12px; color: var(--muted); }

.main-col {
  background: var(--main-bg);
  border-radius: 8px;
  padding: 12px;
  display: flex;
  flex-direction: column;
  min-height: 0;
}

.messages {
  flex: 1 1 auto;
  overflow: auto;
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding-right: 8px;
}

/* prevent horizontal overflow for whole chat layout */
.chat-layout, .left-col, .main-col { overflow-x: hidden; }
.bubble {
  max-width: clamp(220px, 56%, 820px);
  border-radius: 20px;
  padding: 12px 16px;
  line-height: 1.5;
  box-shadow: 0 12px 30px rgba(8,12,20,0.06);
  word-wrap: break-word;
  white-space: pre-wrap;
  display: block;
}
.bubble.user { align-self: flex-end; background: linear-gradient(135deg,var(--bubble-user-start),var(--bubble-user-end)); color: var(--bubble-user-text); }
.bubble.bot { align-self: flex-start; background: linear-gradient(135deg,var(--bubble-bot-start),var(--bubble-bot-end)); color: var(--bubble-bot-text); }

.bubble-row { display:flex; gap:10px; align-items:flex-end; }
.avatar-sm { width:34px; height:34px; border-radius:50%; background:linear-gradient(135deg,rgba(255,255,255,0.9),var(--bubble-bot-start)); display:flex; align-items:center; justify-content:center; font-weight:700; color:var(--bubble-bot-text); flex:0 0 auto; }
.bubble-content { display:flex; flex-direction:column; }
.bubble-content .text { white-space:pre-wrap; }
.bubble-content .meta { font-size:11px; opacity:.65; margin-top:6px; }

/* apply entrance animation utility */
.msg-animate { animation: fadeInUp .36s cubic-bezier(.2,.9,.2,1); }

.bubble .meta { display: block; font-size: 11px; opacity: .65; margin-top: 6px; }

.messages::-webkit-scrollbar { width: 10px; }
.messages::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.08); border-radius: 6px; }

.empty-main { color: var(--muted); margin-top: 40px; }

.composer { padding-top: 6px; }
.error { color: var(--danger); margin-top: 6px; }

@media (max-width: 820px) {
  .chat-layout { grid-template-columns: 1fr; }
  .left-col { order: 2; }
  .main-col { order: 1; }
}

